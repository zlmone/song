package song.api.attachment.controller;import org.apache.commons.fileupload.FileUploadException;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import song.common.net.http.HttpFile;import song.common.result.ActionResult;import song.common.result.UploaderFileResult;import song.common.toolkit.http.HttpFileRequest;import javax.servlet.http.HttpServletRequest;import java.io.IOException;import java.util.ArrayList;import java.util.List;import java.util.Map;/** * description: * author:          song * createDate:      2018/1/24 */@RestController@RequestMapping("/uploader")public class UploaderController {    protected final static String savaPathKey = "savePath";    @PostMapping(value = "server")    public ActionResult uploadServer(HttpServletRequest request) throws IOException, FileUploadException {        List<UploaderFileResult> fileResults = new ArrayList<>();        ActionResult result = new ActionResult();        HttpFileRequest fileRequest = new HttpFileRequest(request);        //获取文件保存的地址        String savePath = fileRequest.getData(savaPathKey);        Map<String, HttpFile> fileMap = fileRequest.batchSaveFile(savePath);        for (Map.Entry<String, HttpFile> entry : fileMap.entrySet()) {            HttpFile httpFile = entry.getValue();            UploaderFileResult uploaderFile = new UploaderFileResult();            uploaderFile.setName(entry.getKey());            uploaderFile.setPath(httpFile.getFilePath());            uploaderFile.setSize(httpFile.getSize());            uploaderFile.setExt(httpFile.getExtension());            uploaderFile.setRealName(httpFile.getFileName());            fileResults.add(uploaderFile);        }        result.setData(fileResults);        return result;    }    @PostMapping(value = "ftp")    public ActionResult uploadFtp(HttpServletRequest request) {        ActionResult result = new ActionResult();        return result;    }}