$.extend(song, {    wx: {        homePage: {            goto: function () {                //查看个人主页                song.gotoUrl(song.wx.getInfo().home);            }            ,            create: function (issrc) {                var iframe = $('<iframe id="iframeHomePage"></iframe>');                if (issrc) {                    song.wx.homePage.load(iframe);                }                iframe.appendTo(document.body);            }            ,            load: function (iframe) {                if (iframe || iframe.length > 0) {                    iframe.attr("src", song.wx.getInfo().home);                }            }        }        ,        exists: function (success) {            //检测是否微信打开            if (!song.client.wx()) {                song.gotoUrl(song.path("common/wxtip.html"));            } else {                success && success();            }        }        ,        buildUser: function (phone, nickname, headimgurl) {            return {                phone: phone,                nickname: nickname,                headimgurl: headimgurl            };        }        ,        getInfo: function () {            if (song.debug) {                return {                    appid: 'wx2e7288fdd5f458b7',                    domain: 'http://wx.10085.cn/xizang/lucky/',                    home: "http://wx.10085.cn/website/personalHome/new/index"                };            }            return {                appid: 'wx43a850f87498127d',                domain: "http://wx.10086.cn/xizang/lucky/",                home: "http://wx.10086.cn/website/personalHome/new/index"            };        }        ,        author: function (getCodeAction, getCodeParams) {            //是否开启本地调试            getCodeParams.debug = song.debug;            var wxInfo = song.wx.getInfo(),                codeUrl = song.buildUrl(wxInfo.domain + getCodeAction, getCodeParams);            //获取code, 并且进行微信鉴权            var authorParam = {                "redirect_url": (codeUrl),                "appid": wxInfo.appid,                "response_type": "code",                "scope": "snsapi_base",                "state": "123#wechat_redirect"            }            var localHost = encodeURIComponent(wxInfo.domain + getCodeAction + "?debug=" + song.debug);            //获取code 并且            var appid = wxInfo.appid;            window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + appid + "&redirect_uri=" + localHost + "&response_type=code&scope=snsapi_base&state=123#wechat_redirect";            //song.gotoUrl(song.buildUrl("https://open.weixin.qq.com/connect/oauth2/authorize", authorParam));        }        ,        getShare: function (wxTokenUrlKey, dataParams, success) {            //微信分享            var param = {                url: encodeURIComponent(window.location.href)            };            $.extend(param, dataParams || {});            var url = song.getUrl(wxTokenUrlKey || "wxShareToken");            song.ajax(url, param, function (res) {                wx.config({                    debug: song.debug, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。                    appId: res.object.appId, // 必填，公众号的唯一标识                    timestamp: res.object.timestamp, // 必填，生成签名的时间戳                    nonceStr: res.object.nonceStr, // 必填，生成签名的随机串                    signature: res.object.signature,// 必填，签名，见附录1                    jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline']                    // 必填，需要使用的JS接口列表，所有JS接口列表见附录2                });                song.wx.initShare(res.object.shareDetailInfo, success);            });        }        ,        // 初始化微信分享功能        initShare: function (shareDetailInfo, success) {            wx.ready(function () {                // 获取“分享到朋友圈”按钮点击状态及自定义分享内容接口                wx.onMenuShareTimeline({                    title: shareDetailInfo.title, // 分享标题                    link: shareDetailInfo.link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致                    imgUrl: shareDetailInfo.imgUrl, // 分享图标                    success: function (res) {                        if (res.errMsg === "shareTimeline:ok") {                            success && success();                        }                    },                    fail: function (res) {                        console.log(res);                    },                    complete: function (res) {                        console.log(res);                    }                });                // 发送朋友                wx.onMenuShareAppMessage({                    title: shareDetailInfo.title, // 分享标题                    desc: shareDetailInfo.desc, // 分享描述                    link: shareDetailInfo.link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致                    imgUrl: shareDetailInfo.imgUrl,// 分享图标                    success: function (res) {                        if (res.errMsg === "sendAppMessage:ok") {                            success && success();                        }                    },                    fail: function (res) {                        console.log(res);                    },                    complete: function (res) {                        console.log(res);                    }                });            });        }    }});